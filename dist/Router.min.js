(()=>{var s=class{isString(t){return Object.prototype.toString.call(t)==="[object String]"}isNumber(t){return Object.prototype.toString.call(t)==="[object Number]"}isRegExp(t){return Object.prototype.toString.call(t)==="[object RegExp]"}isArray(t){return Object.prototype.toString.call(t)==="[object Array]"}isObject(t){return Object.prototype.toString.call(t)==="[object Object]"}isFunction(t){return Object.prototype.toString.call(t)==="[object Function]"}isBoolean(t){return Object.prototype.toString.call(t)==="[object Boolean]"}isNull(t){return Object.prototype.toString.call(t)==="[object Null]"}isUndefined(t){return Object.prototype.toString.call(t)==="[object Undefined]"}isEmpty(t){return this.isUndefined(t)||this.isNull(t)||t===0||t===!1||(this.isString(t)||this.isArray(t))&&t.length===0||this.isObject(t)&&Object.getOwnPropertyNames(t).length===0}isSet(t){return!this.isUndefined(t)&&!this.isNull(t)}};s=new s;function l(c){let t="ArgumentNotFoundError",e=s.isSet(c)?`${c} argument is required. None found`:"Required argument was not found",r=new Error(e);return r.name=t,r.message=e,r.toString=function(){return instace.message},Object.setPrototypeOf(r,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(r,l),r}function u(c,t,e){t=s.isSet(t)?t.toString():typeof t;let r="ArgumentTypeError",o=s.isSet(c)?`typeof ${c.toString()} argument must be equal to ${t}. ${typeof e} found.`:"Invalid argument type found",n=new Error(o);return n.name=r,n.message=o,n.toString=function(){return this.message},Object.setPrototypeOf(n,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(n,u),n}l.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}});u.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf?(Object.setPrototypeOf(l,Error),Object.setPrototypeOf(u,Error)):(l.__proto__=Error,u.__proto__=Error);var h=class{notFoundHandler=null;store=null;dispatch=null;constructor(t){this.routes=[],this.default={hashSensitive:!1,caseInsensitive:!0},this.config={...this.default,...t}}on(t,e){if(!s.isSet(t))throw new l("uri");if(!s.isSet(e))throw new l("callback");if(!s.isString(t))throw new u("uri","string",t);if(!s.isFunction(e))throw new u("callback","function",e);let r={uri:null,callback:null,parameters:null,regExp:null,name:null,current:!1};return this._caseInsensitive&&(t=t.toLowerCase()),t=t.startsWith("/")?t:`/${t}`,this.routes.forEach(o=>{if(o.uri===t)throw new Error(`the uri ${o.uri} already exists`)}),r.uri=t,r.callback=e,r.parameters=this.#r(r),this.routes.push(r),this}onNotFound(t){if(typeof t!="function")throw new TypeError("typeof callback must be a function");this.notFoundHandler=t}setContext(t,e={}){return t!=null?t.context=e:(t={},console.error("router.setContext error: There are no props to assign context. Review the data that you send to the component.")),t}notFoundDefault(t){document.title="Error 404 | Funnels Router",document.body.innerHTML=`
        <h2>Sorry!</h2>
        <h1>Error 404</h1>
        <p>The page ${t} could not be found.</p>
        `}#e(){return navigator.languages!=null?navigator.languages[0].substring(0,2):navigator.language.substring(0,2)}route(){this.routes.forEach(n=>{this.#o(n)},this);let t=!1,e=null,r=null,o={i18n:this.#e(),setContext:this.setContext,pathFor:(n,i)=>this.pathFor(n,i)};if(location.hash&&this.config.hashSensitive){let n=location.hash,i=n.indexOf("?");n.indexOf("?")===-1?(e=n,r=null):(e=n.substring(0,i),r=n.substring(n.indexOf("?"),n.length))}else e=location.pathname,location.search===""?r=null:r=location.search;if(e=e.startsWith("/")?e:`/${e}`,this.routes.some(n=>{if(e.match(n.regExp)){t=!0;let i={};return i.uri=e,i.referrer=document.referrer,r===null?i.query=null:i.query=Object.fromEntries(new URLSearchParams(r)),i.params=this.#n(n,e),n.callback.call(this,i,o)}}),!t){let n={};return n.uri=e,this.notFoundHandler===null?this.notFoundDefault(e):this.notFoundHandler(e)}}run(){this.route(),this.config.hashSensitive&&window.addEventListener("hashchange",()=>{this.route()})}setName(t){if(!s.isSet(t))throw new l("name");if(!s.isString(t))throw new u("name","string",t);let e=this.routes[this.routes.length-1];return this.routes.forEach(r=>{if(r.name===t)throw new Error(`Duplicate naming. A route with name ${t} already exists`)}),e.name=t,this}pathFor(t,e={}){if(!s.isSet(t))throw new l("name");if(!s.isString(t))throw new u("name","string",string);if(s.isEmpty(t))throw new TypeError("name cannot be empty");let r=!1,o;return this.routes.some(n=>{if(n.name===t){if(r=!0,o=n.uri,this.#t(o)){if(!s.isSet(e))throw new l("parameters");if(!s.isObject(e))throw new u("parameters","object",e);if(s.isEmpty(e))throw new TypeError("parameters cannot be empty");let i=[];for(let a of n.uri.match(/\{(\w+)\}/g))a=a.replace("{",""),a=a.replace("}",""),i.push(a);if(i.length!==Object.getOwnPropertyNames(e).length)throw new Error(`The route with name [${t}] contains ${i.length} parameters. ${Object.getOwnPropertyNames(e).length} given`);for(let a in e){if(!i.includes(a))throw new Error(`Invalid parameter name [${a}]`);let p=new RegExp(`{${a}}`,"g");o=o.replace(p,e[a])}}}else o=!1}),o}#r(t){let e=[],r=0;return this.#t(t.uri)&&t.uri.replace(/\{\w+\}/g,o=>{r++,o.replace(/\w+/,n=>{let i={};i[n]={sn:r,regExp:"([^\\/]+)",value:null},e.push(i)})}),e}#t(t){return t.search(/{\w+}/g)>=0}#n(t,e){let r=e.match(t.regExp);if(!r)return;let o={};return r.forEach((n,i)=>{if(i!==0){let a=Object.getOwnPropertyNames(t.parameters[i-1]);o[a]=n}}),o}#o(t){let e=t.uri;return e=e.replace(/\//g,"\\/"),e=e.replace(/\./g,"\\."),e=e.replace("/","/?"),this.#t(t.uri)&&e.replace(/{\w+}/g,r=>{let o=r.replace("{","");return o=o.replace("}",""),t.parameters.some(n=>{if(n[o]!==void 0)return e=e.replace(r,n[o].regExp),e}),r}),e=`^${e}$`,t.regExp=new RegExp(e),t}};})();
